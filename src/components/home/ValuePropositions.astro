---
import { useTranslations } from '@i18n/utils';
import valuePropositions from '@data/value-propositions.json';

const lang = Astro.currentLocale || 'fr';
const { t } = useTranslations(lang as 'fr' | 'en');

// Icon mapping for simple SVG icons
const iconMap: Record<string, string> = {
  'clock': 'M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z M12 6v6l4 2',
  'shield-check': 'M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z M9 12l2 2 4-4',
  'trending-up': 'M23 6l-9.5 9.5-5-5L1 18',
  'link': 'M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71 M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71',
  'headphones': 'M3 18v-6a9 9 0 0118 0v6M3 18a3 3 0 003 3h1a3 3 0 003-3v-1a3 3 0 00-3-3H6a3 3 0 00-3 3v1zm15 0a3 3 0 01-3 3h-1a3 3 0 01-3-3v-1a3 3 0 013-3h1a3 3 0 013 3v1z',
  'arrow-up-right': 'M7 17L17 7 M7 7h10v10'
};
---

<section class="relative min-h-screen flex items-center justify-center overflow-hidden bg-background py-16 md:py-20 lg:py-24" id="value-propositions">
  <!-- Cyber Grid Background -->
  <div class="cyber-grid-light"></div>

  <!-- Content Container -->
  <div class="container-custom relative z-10 w-full">
    <div class="w-full max-w-7xl mx-auto">
      <!-- Section Header -->
      <div class="text-center mb-6 md:mb-8">
        <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full border border-cyan-500/30 backdrop-blur-sm mb-4">
          <span class="pulse-dot"></span>
          <span class="text-xs font-mono text-cyan-500 uppercase tracking-widest">{t('valueProps.badge')}</span>
        </div>
        <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-3 text-foreground font-mono">
          {t('valueProps.title')}
        </h2>
        <p class="text-sm md:text-base text-muted-foreground max-w-2xl mx-auto font-mono">
          {t('valueProps.subtitle')}
        </p>
      </div>

      <!-- Value Cards Grid - Responsive Layout -->
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 md:gap-6">
        {valuePropositions.map((prop, index) => (
          <div class="value-card-wrapper group" style={`animation-delay: ${index * 100}ms`}>
            <!-- Card Border with Gradient -->
            <div class="value-card card-hover-glow card-border-glow-hover relative h-full p-[1px] overflow-hidden rounded-xl">
              <div class="absolute inset-0 rounded-xl bg-gradient-to-b from-grey-30/60 via-grey-25/30 to-transparent"></div>

              <!-- Card Content -->
              <div class="relative h-full rounded-xl bg-background overflow-hidden">
                <!-- Content -->
                <div class="relative z-10 p-4 md:p-5 lg:p-6 flex flex-col h-full">
                  <!-- Icon -->
                  <div class="mb-3 md:mb-4">
                    <div class="w-12 h-12 md:w-14 md:h-14 rounded-lg border border-border/30 bg-background/50 backdrop-blur-sm flex items-center justify-center group-hover:border-cyan-500/50 group-hover:bg-cyan-500/10 transition-all duration-300">
                      <svg
                        class="w-6 h-6 md:w-7 md:h-7 text-muted-foreground group-hover:text-cyan-500 transition-colors duration-300"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      >
                        <path d={iconMap[prop.icon]} />
                      </svg>
                    </div>
                  </div>

                  <!-- Title -->
                  <h3 class="text-base md:text-lg font-bold text-foreground mb-2 font-mono group-hover:text-cyan-500 transition-colors duration-300">
                    {t(prop.titleKey)}
                  </h3>

                  <!-- Description -->
                  <p class="text-xs md:text-sm text-muted-foreground leading-relaxed flex-grow font-mono">
                    {t(prop.descKey)}
                  </p>

                  <!-- Arrow Button -->
                  <div class="mt-3 md:mt-4 flex justify-end">
                    <button class="cyber-arrow-btn w-8 h-8 md:w-10 md:h-10 flex items-center justify-center border border-border/30 bg-background/30 backdrop-blur-sm group-hover:border-cyan-500 group-hover:bg-cyan-500 transition-all duration-300 clip-corner-sm" aria-label="Learn more about {t(prop.titleKey)}" aria-hidden="true" tabindex="-1">
                      <svg class="w-4 h-4 md:w-5 md:h-5 text-muted-foreground group-hover:text-black transition-all duration-300 group-hover:translate-x-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </div>

</section>

<style>
  /* ============================================
     VALUE CARDS ANIMATION
     ============================================ */
  .value-card-wrapper {
    opacity: 0;
    animation: fadeInUp 0.6s ease-out forwards;
  }

  /* Value cards use shared utility classes:
     .card-hover-glow and .card-border-glow-hover
     Arrow button uses .clip-corner-sm utility */

</style>

