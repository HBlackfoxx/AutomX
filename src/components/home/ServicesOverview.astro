---
import { useTranslations } from '@i18n/utils';
import services from '@data/services.json';

const lang = Astro.currentLocale || 'fr';
const { t } = useTranslations(lang as 'fr' | 'en');

// Icon mapping
const iconMap: Record<string, string> = {
  'git-branch': 'M6 3v12m6-12v12m6-12v12M3 18h18',
  'globe': 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z',
  'database': 'M20 6c0-1.1-3.58-2-8-2S4 4.9 4 6v12c0 1.1 3.58 2 8 2s8-.9 8-2V6zm-8 10c-3.31 0-6-.45-6-1v-1.28c1.19.45 3.11.78 6 .78s4.81-.33 6-.78V15c0 .55-2.69 1-6 1z',
  'settings': 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z'
};
---

<section class="relative py-16 md:py-24 bg-background overflow-hidden" id="services-overview">
  <div class="container-custom relative z-10">
    <!-- Section Header -->
    <div class="text-center mb-12 md:mb-16">
      <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full border border-cyan-500/30 backdrop-blur-sm mb-4">
        <span class="pulse-dot"></span>
        <span class="text-xs font-mono text-cyan-500 uppercase tracking-widest">Our Services</span>
      </div>
      <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-4 text-foreground font-mono">
        {t('services.title')}
      </h2>
      <p class="text-base md:text-lg text-muted-foreground max-w-2xl mx-auto font-mono">
        {t('services.subtitle')}
      </p>
    </div>

    <!-- Services Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">
      {services.map((service, index) => (
        <div
          class="service-card group relative p-[1px] rounded-2xl overflow-hidden hover:scale-105 transition-all duration-300"
          style={`animation-delay: ${index * 100}ms`}
        >
          <!-- Card Border Gradient -->
          <div class="absolute inset-0 rounded-2xl bg-gradient-to-br from-cyan-500/50 via-grey-30/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>

          <!-- Card Content -->
          <div class="relative h-full rounded-2xl bg-background p-6 md:p-8 border border-border group-hover:border-cyan-500/50 transition-all duration-300">
            <!-- Icon -->
            <div class="mb-4 inline-flex items-center justify-center w-14 h-14 rounded-xl bg-gradient-to-br from-cyan-500/20 to-grey-30/20 border border-cyan-500/30 group-hover:border-cyan-500 transition-colors duration-300">
              <svg class="w-7 h-7 text-cyan-500" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
                <path d={iconMap[service.icon] || iconMap['settings']}></path>
              </svg>
            </div>

            <!-- Title -->
            <h3 class="text-xl md:text-2xl font-bold mb-3 text-foreground font-mono group-hover:text-cyan-500 transition-colors duration-300">
              {t(service.titleKey)}
            </h3>

            <!-- Description -->
            <p class="text-sm md:text-base text-muted-foreground mb-4 leading-relaxed">
              {t(service.descKey)}
            </p>

            <!-- Technologies -->
            <div class="flex flex-wrap gap-2">
              {service.technologies.map((tech: string) => (
                <span class="px-3 py-1 text-xs font-mono bg-grey-30/30 border border-grey-30 rounded-full text-cyan-500 hover:border-cyan-500 transition-colors duration-200">
                  {tech}
                </span>
              ))}
            </div>

            <!-- Hover Glow Effect -->
            <div class="absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none">
              <div class="absolute inset-0 bg-gradient-to-br from-cyan-500/5 to-transparent"></div>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .service-card {
    opacity: 0;
    animation: fadeInUp 0.6s ease-out forwards;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .pulse-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #0ea5e9;
    animation: pulse-animation 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  @keyframes pulse-animation {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }
</style>
