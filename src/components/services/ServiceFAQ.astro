---
interface FAQ {
  questionKey: string;
  answerKey: string;
}

interface Props {
  title: string;
  faqs: FAQ[];
  color?: 'cyan' | 'purple' | 'green';
}

const { title, faqs, color = 'cyan' } = Astro.props;

import { useTranslations } from '@i18n/utils';
const lang = Astro.currentLocale || 'fr';
const { t } = useTranslations(lang as 'fr' | 'en');

const colorClasses = {
  cyan: 'text-cyan-500',
  purple: 'text-cyan-500',
  green: 'text-cyan-500'
};

const accentColor = colorClasses[color];
---

<section class="py-16 md:py-24 bg-background">
  <div class="container-custom">
    <div class="max-w-3xl mx-auto">
      <!-- Title -->
      <h2 class="text-3xl md:text-4xl font-bold mb-12 text-center text-foreground font-mono">
        {title}
      </h2>

      <!-- FAQ Items -->
      <div class="space-y-4">
        {faqs.map((faq, index) => (
          <details
            class="faq-item group rounded-xl bg-background border border-border overflow-hidden transition-all duration-300 hover:border-cyan-500/50"
            style={`animation-delay: ${index * 100}ms`}
          >
            <summary class="flex items-center justify-between p-6 cursor-pointer list-none">
              <h3 class={`text-lg font-semibold text-foreground font-mono pr-4 group-open:${accentColor} transition-colors duration-300`}>
                {t(faq.questionKey)}
              </h3>
              <svg class="w-5 h-5 text-muted-foreground transition-transform duration-300 group-open:rotate-180 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
              </svg>
            </summary>
            <div class="px-6 pb-6">
              <p class="text-muted-foreground leading-relaxed">
                {t(faq.answerKey)}
              </p>
            </div>
          </details>
        ))}
      </div>
    </div>
  </div>
</section>

<style>
  .faq-item {
    opacity: 0;
    animation: fadeInUp 0.5s ease-out forwards;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  details[open] summary {
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  }
</style>
