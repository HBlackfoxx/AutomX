---
interface Props {
  title: string;
  description: string;
  icon: string;
  href: string;
  color?: 'cyan' | 'purple' | 'green';
  technologies: string[];
}

const {
  title,
  description,
  icon,
  href,
  color = 'cyan',
  technologies
} = Astro.props;

import { useTranslations } from '@i18n/utils';
const lang = Astro.currentLocale || 'fr';
const { t } = useTranslations(lang as 'fr' | 'en');

const colorClasses = {
  cyan: {
    icon: 'text-cyan-500',
    iconBg: 'from-cyan-500/20 to-grey-30/20 border-cyan-500/30 group-hover:border-cyan-500',
    border: 'group-hover:border-cyan-500/50',
    title: 'group-hover:text-cyan-500',
    badge: 'bg-black/30 border-cyan-500/30 text-cyan-500 hover:border-cyan-500',
    gradient: 'from-cyan-500/50 via-grey-30/30 to-transparent'
  },
  purple: {
    icon: 'text-cyan-500',
    iconBg: 'from-cyan-500/20 to-grey-30/20 border-cyan-500/30 group-hover:border-cyan-500',
    border: 'group-hover:border-cyan-500/50',
    title: 'group-hover:text-cyan-500',
    badge: 'bg-black/30 border-cyan-500/30 text-cyan-500 hover:border-cyan-500',
    gradient: 'from-cyan-500/50 via-grey-30/30 to-transparent'
  },
  green: {
    icon: 'text-cyan-500',
    iconBg: 'from-cyan-500/20 to-grey-30/20 border-cyan-500/30 group-hover:border-cyan-500',
    border: 'group-hover:border-cyan-500/50',
    title: 'group-hover:text-cyan-500',
    badge: 'bg-black/30 border-cyan-500/30 text-cyan-500 hover:border-cyan-500',
    gradient: 'from-cyan-500/50 via-grey-30/30 to-transparent'
  }
};

const colors = colorClasses[color];

// Icon mapping
const iconPaths: Record<string, string> = {
  'git-branch': 'M6 3v12m6-12v12m6-12v12M3 18h18',
  'globe': 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z',
  'database': 'M4 7c0-1.1 3.58-2 8-2s8 .9 8 2-3.58 2-8 2-8-.9-8-2zm0 5c0 1.1 3.58 2 8 2s8-.9 8-2M4 12v5c0 1.1 3.58 2 8 2s8-.9 8-2v-5',
  'settings': 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z'
};
---

<a
  href={href}
  class="service-card-link group relative block p-[1px] rounded-2xl overflow-hidden transition-all duration-300 hover:scale-105"
>
  <!-- Border Gradient -->
  <div class={`absolute inset-0 rounded-2xl bg-gradient-to-br ${colors.gradient} opacity-0 group-hover:opacity-100 transition-opacity duration-300`}></div>

  <!-- Card Content -->
  <div class={`relative h-full rounded-2xl bg-background p-8 border border-border ${colors.border} transition-all duration-300`}>
    <!-- Icon -->
    <div class={`mb-6 inline-flex items-center justify-center w-16 h-16 rounded-xl bg-gradient-to-br ${colors.iconBg} border transition-all duration-300 group-hover:scale-110 group-hover:rotate-3`}>
      <svg class={`w-8 h-8 ${colors.icon}`} fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
        <path d={iconPaths[icon] || iconPaths['settings']}></path>
      </svg>
    </div>

    <!-- Title -->
    <h3 class={`text-2xl font-bold mb-3 text-foreground font-mono ${colors.title} transition-colors duration-300`}>
      {title}
    </h3>

    <!-- Description -->
    <p class="text-base text-muted-foreground mb-6 leading-relaxed">
      {description}
    </p>

    <!-- Technologies -->
    <div class="flex flex-wrap gap-2 mb-6">
      {technologies.slice(0, 4).map((tech: string) => (
        <span class={`px-3 py-1 text-xs font-mono border rounded-full ${colors.badge} transition-colors duration-200`}>
          {tech}
        </span>
      ))}
    </div>

    <!-- CTA -->
    <div class={`inline-flex items-center gap-2 text-sm font-semibold font-mono ${colors.icon}`}>
      <span>{t('servicesPage.explore_service')}</span>
      <svg class="w-4 h-4 transition-transform duration-300 group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6" />
      </svg>
    </div>

    <!-- Hover Glow -->
    <div class="absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none">
      <div class={`absolute inset-0 bg-gradient-to-br ${colors.iconBg} opacity-5`}></div>
    </div>
  </div>
</a>

<style>
  .service-card-link {
    display: block;
  }
</style>
